[TOC]





# 一、为什么我要选择天猫精灵IOT平台，而不选择阿里云物联网生活平台

- 对于设备来说，其实都是一样的！选择天猫精灵IOT平台可以在 天猫精灵APP上实现面板控制。而阿里云物联网生活平台只能选择 公版APP 或者品牌APP控制！



# 二、拉取源码

- 先拉取仓库，部署在码云的，拉取很快！！


```
git clone --recursive https://gitee.com/xuhongv/esp-aliyun
```

&nbsp;&nbsp; &nbsp; &nbsp; 由于 esp32 和 esp8266 将会采用不同的 `sdkconfig.defaults` 和对应的 `partitions.csv`，在对应的 make 命令中加入了对应的芯片选项，如 `chip=esp32` 或 chip=esp8266。

- 当 chip=esp8266 时将默认使用 `sdkconfig_esp8266.defaults` 以及 `partitions_esp8266.csv`。

&nbsp;&nbsp; &nbsp; &nbsp;  **所以这样做在 esp-aliyun 目录下执行：**

```cpp
cd examples/solutions/smart_light
make chip=esp8266 defconfig
make menuconfig
```


&nbsp;&nbsp; &nbsp; &nbsp; **最后**：将 USB 线连接好 ESP 设备和 PC,确保烧写端口正确。配置烧录串口，先擦除所有内容，然后编译并且烧录；



```cpp
make erase_flash
make flash
```
--------------------------


# 三、四元组信息一一对应


阿里云生活平台( 飞燕平台 )|	天猫精灵IOT平台
---|---
DeviceName|		DeviceName
DeviceSecret|		ProductSecret
ProductKey |		Product ID
ProductSecret	|	产品标识符（产品详情获取）


--------------------------


# 四、四元组烧录

- 先把参数替换进去，如下找到 `single_mfg_config.csv` 文件，编辑，替换里面的参数，就会生成 `my_single_mfg.bin`文件，如下图所示：

```c
$IDF_PATH/components/nvs_flash/nvs_partition_generator/nvs_partition_gen.py --input single_mfg_config.csv --output my_single_mfg.bin --size 0x4000
```

--------------------------

- 然后，单独烧录这个文件进去，可以看到地址是 `0x100000 `  ：

```c
$IDF_PATH/components/esptool_py/esptool/esptool.py --port COM12 write_flash 0x100000 my_single_mfg.bin
```

--------------------------


# 五、配网走起
